# Output Schema Definition

This document describes the structure of the JSON objects generated by the `jurDroids` tool. By default, the tool outputs profiles in [JSON Lines](https://jsonlines.org/) format, where each line in the output file is a complete, independent JSON object representing one generated juror profile.

## Overall Structure

Each JSON object (representing one juror) has the following top-level keys:

```json
{
  "jurorId": "...",
  "profile": { ... },
  "generationMetadata": { ... }
}
```

---

### `jurorId`

* **Type:** `String`
* **Description:** A unique identifier assigned to this specific generated juror profile. Useful for tracking and referencing individual profiles.
* **Example:** `"sim-juror-abc123"`

---

### `profile`

* **Type:** `Object`
* **Description:** Contains the core attributes and characteristics of the juror as generated by the Large Language Model based on the provided prompts and parameters.

**Fields within `profile`:**

| Field              | Type           | Description                                                                                                | Example                                                                 |
| :----------------- | :------------- | :--------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------- |
| `background`       | `String`       | A narrative description of the juror's background, profession, relevant history, or demographics.           | `"Data scientist with a background in behavioral economics."`           |
| `expertiseAreas`   | `List[String]` | A list of areas where the juror possesses specific knowledge or expertise relevant to potential cases.    | `["statistics", "machine learning", "market analysis"]`                   |
| `cognitiveProfile` | `String`       | Description of the juror's thinking style, potential biases, decision-making tendencies, or personality traits. | `"Prone to analytical thinking, slightly risk-averse, values empirical evidence."` |
| `platformActivity` | `String`       | A *simulated* summary of the juror's past activity or performance within the justice platform context.      | `"Simulated: 25 cases judged, 92% coherence."`                            |
| `personalityType`   | `String`       | *(New)* Personality classification based on a standardized framework.                                         | `"INTJ"`                                                               |
| `personalityDetails`| `Object`       | *(New)* Detailed breakdown of personality traits using a chosen system (e.g., MBTI, Big Five).                | `{ "system": "MBTI", "type": "INTJ", "traits": ["strategic", "decisive"] }` |

---

### `generationMetadata`

* **Type:** `Object`
* **Description:** Contains metadata about the generation process for this specific profile. Crucial for **traceability, reproducibility, and debugging**.

**Fields within `generationMetadata`:**

| Field                 | Type           | Description                                                                                                  | Example                                                                          |
| :-------------------- | :------------- | :----------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------- |
| `generationTimestamp` | `String`       | ISO 8601 formatted timestamp indicating when the profile was generated.                                      | `"2025-04-01T09:30:00Z"`                                                         |
| `llmBackendUsed`      | `String`       | Identifier for the LLM backend service used (e.g., "OpenAI", "Azure OpenAI", "VertexAI", "Local/Ollama").    | `"Azure OpenAI"`                                                                 |
| `llmModelName`        | `String`       | The specific model name or deployment ID used for generation (e.g., "gpt-4-turbo-preview", "llama3").        | `"gpt-4-deployment-xyz"`                                                         |
| `promptTemplateId`    | `String`       | An identifier for the specific prompt template file or version used to generate this profile.                | `"juror_base_v1.2"`                                                              |
| `generationParameters`| `Object`       | An object containing the key LLM parameters used during generation that affect randomness and output style. | `{ "temperature": 0.75, "top_p": 1.0, "max_tokens": 500, "seed": 42 }`          |
| `requestInput`        | `Object`       | *(Optional)* An object containing key inputs or context provided for generating this *specific* profile.     | `{ "archetypeRequested": "analytical_expert", "caseContextSnippet": "..." }` |
| `scriptVersion`       | `String`       | *(Optional)* The version of the `jurDroids` generation script used.                                         | `"v0.2.1"`                                                                       |

**Fields within `generationParameters` (Nested Object):**

| Field         | Type    | Description                                                                                                    |
| :------------ | :------ | :------------------------------------------------------------------------------------------------------------- |
| `temperature` | `Number`| Controls randomness (higher = more creative).                                                                 |
| `top_p`       | `Number`| Alternative to temperature for nucleus sampling.                                                              |
| `max_tokens`  | `Integer`| Maximum number of tokens generated for the profile content.                                                 |
| `seed`        | `Integer`| *(Optional)* The random seed used, if supported by the backend and requested, for potentially reproducible outputs. |

**Fields within `requestInput` (Nested Object - Optional):**

| Field                 | Type     | Description                                                                         |
| :-------------------- | :------- | :---------------------------------------------------------------------------------- |
| `archetypeRequested`  | `String` | Identifier for the specific juror archetype requested (if applicable).                |
| `caseContextSnippet`  | `String` | Snippet of case context provided to the LLM for generating this profile (if applicable). |
| *(other inputs)* | *(various)*| Other specific inputs used for this generation instance.                          |

---

## Complete Example

Here is an example of a single JSON object representing one juror profile:

```json
{
  "jurorId": "sim-juror-abc123",
  "profile": {
    "background": "Data scientist with a background in behavioral economics.",
    "expertiseAreas": ["statistics", "machine learning", "market analysis"],
    "cognitiveProfile": "Prone to analytical thinking, slightly risk-averse, values empirical evidence.",
    "platformActivity": "Simulated: 25 cases judged, 92% coherence.",
    "personalityType": "INTJ",
    "personalityDetails": {
      "system": "MBTI",
      "type": "INTJ",
      "traits": ["strategic", "future-focused", "decisive"]
    }
  },
  "generationMetadata": {
    "generationTimestamp": "2025-04-01T09:30:00Z",
    "llmBackendUsed": "Azure OpenAI",
    "llmModelName": "gpt-4-deployment-xyz",
    "promptTemplateId": "juror_base_v1.2",
    "generationParameters": {
      "temperature": 0.75,
      "top_p": 1.0,
      "max_tokens": 500,
      "seed": 42
    },
    "requestInput": {
      "archetypeRequested": "analytical_expert",
      "caseContextSnippet": "Dispute involving smart contract failure..."
    },
    "scriptVersion": "v0.2.1"
  }
}
```